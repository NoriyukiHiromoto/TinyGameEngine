//----------------------------------------------------------------------------------
//
//----------------------------------------------------------------------------------
#include "Common/Artemis.ReferenceCountObject.hpp"

//----------------------------------------------------------------------------------
//
//----------------------------------------------------------------------------------
namespace Artemis
{
namespace Common
{

//----------------------------------------------------------------------------------
//
//----------------------------------------------------------------------------------
ReferenceCountObject::ReferenceCountObject()
	: _ReferenceCount(1)
{
}

//----------------------------------------------------------------------------------
//
//----------------------------------------------------------------------------------
ReferenceCountObject::~ReferenceCountObject()
{
}

//----------------------------------------------------------------------------------
//
//----------------------------------------------------------------------------------
int32_t ReferenceCountObject::AddReference()
{
	return ++_ReferenceCount;
}

//----------------------------------------------------------------------------------
//
//----------------------------------------------------------------------------------
int32_t ReferenceCountObject::Release()
{
	int32_t Count = --_ReferenceCount;
	if (Count == 0)
	{
		delete this;
	}
	return Count;
}

//----------------------------------------------------------------------------------
//
//----------------------------------------------------------------------------------
int32_t ReferenceCountObject::GetReference() const
{
	return _ReferenceCount.load();
}

//----------------------------------------------------------------------------------
//
//----------------------------------------------------------------------------------
}
}
